<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SpinToolBox: D:/Sylvain/Instru/SpinToolBox V2.6/src/SDK/SDK/SData/SData2D.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../compass64.png"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">SpinToolBox&#160;<span id="projectnumber">2.6</span></div>
   <div id="projectbrief">Automatize the measurement process in the characterization of the magnetic tunnel junction</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>D:/Sylvain/Instru/SpinToolBox V2.6/src/SDK/SDK/SData/SData2D.cpp</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">Copyright (C) 2010 Sylvain Martin (Spintec - CEA/CNRS/UJF/G-INP)</span>
<a name="l00003"></a>00003 <span class="comment">All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">This file is part of the MultiMaxSpectre</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">This program is free software; you can redistribute it and/or</span>
<a name="l00009"></a>00009 <span class="comment">modify it under the terms of the GNU General Public License</span>
<a name="l00010"></a>00010 <span class="comment">as published by the Free Software Foundation; either version 2</span>
<a name="l00011"></a>00011 <span class="comment">of the License, or (at your option) any later version.</span>
<a name="l00012"></a>00012 <span class="comment"></span>
<a name="l00013"></a>00013 <span class="comment">This program is distributed in the hope that it will be useful,</span>
<a name="l00014"></a>00014 <span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00016"></a>00016 <span class="comment">GNU General Public License for more details.</span>
<a name="l00017"></a>00017 <span class="comment"></span>
<a name="l00018"></a>00018 <span class="comment">You should have received a copy of the GNU General Public License</span>
<a name="l00019"></a>00019 <span class="comment">along with this program; if not, write to the Free Software</span>
<a name="l00020"></a>00020 <span class="comment">Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
<a name="l00021"></a>00021 <span class="comment">*/</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;SData2D.h&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;SDataError.h&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;QtCore&gt;</span>
<a name="l00026"></a>00026 
<a name="l00035"></a>00035 
<a name="l00036"></a><a class="code" href="../../da/d81/class_s_data2_d.html#ae48cf0fb2735a26737a7b67fd34e0d91">00036</a> <a class="code" href="../../da/d81/class_s_data2_d.html#ae48cf0fb2735a26737a7b67fd34e0d91" title="Default constructor.">SData2D::SData2D</a>():
<a name="l00037"></a>00037         NbMetatData_(0),
<a name="l00038"></a>00038           MagToolBoxCompatibility_(true)
<a name="l00039"></a>00039 {
<a name="l00040"></a>00040                colName_.append(<span class="stringliteral">&quot;x&quot;</span>);
<a name="l00041"></a>00041                colName_.append(<span class="stringliteral">&quot;y&quot;</span>);
<a name="l00042"></a>00042 
<a name="l00043"></a>00043                colUnit_.append(<span class="stringliteral">&quot;A.U.&quot;</span>);
<a name="l00044"></a>00044                colUnit_.append(<span class="stringliteral">&quot;A.U.&quot;</span>);
<a name="l00045"></a>00045 }
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 
<a name="l00068"></a>00068 
<a name="l00069"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a5298a57a363511704ede005ca3ec982b">00069</a> <a class="code" href="../../da/d81/class_s_data2_d.html#ae48cf0fb2735a26737a7b67fd34e0d91" title="Default constructor.">SData2D::SData2D</a>(QFile * file) :
<a name="l00070"></a>00070      NbMetatData_(0),
<a name="l00071"></a>00071      MagToolBoxCompatibility_(true),
<a name="l00072"></a>00072      ptFile(NULL)
<a name="l00073"></a>00073 {
<a name="l00074"></a>00074      colName_.append(<span class="stringliteral">&quot;x&quot;</span>);
<a name="l00075"></a>00075      colName_.append(<span class="stringliteral">&quot;y&quot;</span>);
<a name="l00076"></a>00076 
<a name="l00077"></a>00077      colUnit_.append(<span class="stringliteral">&quot;A.U.&quot;</span>);
<a name="l00078"></a>00078      colUnit_.append(<span class="stringliteral">&quot;A.U.&quot;</span>);
<a name="l00079"></a>00079      this-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a990210e1238c543567233d4502207ecf" title="Open and read data from a data file.">openFile</a>(file);
<a name="l00080"></a>00080 }
<a name="l00099"></a>00099 <a class="code" href="../../da/d81/class_s_data2_d.html#ae48cf0fb2735a26737a7b67fd34e0d91" title="Default constructor.">SData2D::SData2D</a>( QString <span class="keyword">const</span> file ):
<a name="l00100"></a>00100      NbMetatData_(0),
<a name="l00101"></a>00101      MagToolBoxCompatibility_(true)
<a name="l00102"></a>00102 {
<a name="l00103"></a>00103      ptFile = <span class="keyword">new</span> QFile(file);
<a name="l00104"></a>00104 
<a name="l00105"></a>00105      colName_.append(<span class="stringliteral">&quot;x&quot;</span>);
<a name="l00106"></a>00106      colName_.append(<span class="stringliteral">&quot;y&quot;</span>);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108      colUnit_.append(<span class="stringliteral">&quot;A.U.&quot;</span>);
<a name="l00109"></a>00109      colUnit_.append(<span class="stringliteral">&quot;A.U.&quot;</span>);
<a name="l00110"></a>00110      this-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a990210e1238c543567233d4502207ecf" title="Open and read data from a data file.">openFile</a>(file);
<a name="l00111"></a>00111 
<a name="l00112"></a>00112      <a class="code" href="../../da/d81/class_s_data2_d.html#ae48cf0fb2735a26737a7b67fd34e0d91" title="Default constructor.">SData2D</a>(ptFile);
<a name="l00113"></a>00113 }
<a name="l00124"></a>00124 
<a name="l00125"></a><a class="code" href="../../da/d81/class_s_data2_d.html#ad479796d4b955d8da619c2e81d20e37f">00125</a> <a class="code" href="../../da/d81/class_s_data2_d.html#ae48cf0fb2735a26737a7b67fd34e0d91" title="Default constructor.">SData2D::SData2D</a>(QList&lt;double&gt; <span class="keyword">const</span> xList, QList&lt;double&gt; <span class="keyword">const</span> yList ) :
<a name="l00126"></a>00126         NbMetatData_(0){
<a name="l00127"></a>00127 
<a name="l00128"></a>00128      <span class="keywordflow">if</span>( xList.size() != yList.size()){
<a name="l00129"></a>00129           qDebug(<span class="stringliteral">&quot;ERROR : SData2D::SData2D(QList&lt;double&gt; const xList, QList&lt;double&gt; const yList ) : xList.size() != yList.size() &quot;</span>);
<a name="l00130"></a>00130           <span class="keywordflow">return</span>;
<a name="l00131"></a>00131      }
<a name="l00132"></a>00132 
<a name="l00133"></a>00133      this-&gt;x_.append(xList);
<a name="l00134"></a>00134      this-&gt;y_.append(yList);
<a name="l00135"></a>00135 }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 
<a name="l00144"></a>00144 SData2D::~SData2D(){
<a name="l00145"></a>00145      <span class="keywordflow">if</span>(ptFile == NULL){
<a name="l00146"></a>00146           <span class="keyword">delete</span> ptFile;
<a name="l00147"></a>00147      }
<a name="l00148"></a>00148 }
<a name="l00149"></a>00149 
<a name="l00150"></a>00150 
<a name="l00164"></a>00164 
<a name="l00165"></a><a class="code" href="../../da/d81/class_s_data2_d.html#ab146d1422d55e1883d78023f83a95661">00165</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a990210e1238c543567233d4502207ecf" title="Open and read data from a data file.">SData2D::openFile</a>(QString file){
<a name="l00166"></a>00166     ptFile = <span class="keyword">new</span> QFile(file);
<a name="l00167"></a>00167     this-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a990210e1238c543567233d4502207ecf" title="Open and read data from a data file.">openFile</a>(ptFile);
<a name="l00168"></a>00168 }
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 
<a name="l00183"></a>00183 
<a name="l00184"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a31740f44ce26da9a4f4444510a8587f6">00184</a> QVariant <a class="code" href="../../da/d81/class_s_data2_d.html#a31740f44ce26da9a4f4444510a8587f6" title="return the MetaData with the key give in argument.">SData2D::metaData</a>(QString <span class="keyword">const</span> key)<span class="keyword"> const</span>{
<a name="l00185"></a>00185 
<a name="l00186"></a>00186     <span class="keywordflow">if</span>(this-&gt;MetaData_.contains(key)){
<a name="l00187"></a>00187         <span class="keywordflow">return</span> this-&gt;MetaData_.value(key);
<a name="l00188"></a>00188     }<span class="keywordflow">else</span>{
<a name="l00189"></a>00189       <span class="comment">//  throw SERROR_NO_FOUND_METADATA;</span>
<a name="l00190"></a>00190           qDebug() &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; SERROR_NO_FOUND_METADATA;
<a name="l00191"></a>00191         <span class="keywordflow">return</span> QVariant(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00192"></a>00192     }
<a name="l00193"></a>00193 }
<a name="l00194"></a>00194 
<a name="l00217"></a>00217 
<a name="l00218"></a><a class="code" href="../../da/d81/class_s_data2_d.html#ae9b95822ee4c0834dc7025d2738d8da9">00218</a> <span class="keywordtype">double</span> <a class="code" href="../../da/d81/class_s_data2_d.html#ae9b95822ee4c0834dc7025d2738d8da9" title="return the MetaData with the key give in argument.">SData2D::metaDataAsDouble</a>(QString <span class="keyword">const</span> key)<span class="keyword"> const</span>{
<a name="l00219"></a>00219     QRegExp regexp;
<a name="l00220"></a>00220     regexp.setPattern(<span class="stringliteral">&quot;\\s+\\D*$&quot;</span>);
<a name="l00221"></a>00221 
<a name="l00222"></a>00222     <span class="keywordtype">bool</span> okConvert;
<a name="l00223"></a>00223     <span class="keywordtype">double</span> value;
<a name="l00224"></a>00224 
<a name="l00225"></a>00225     <span class="keywordflow">if</span>(this-&gt;MetaData_.contains(key)){
<a name="l00226"></a>00226 
<a name="l00227"></a>00227 
<a name="l00228"></a>00228         value = this-&gt;MetaData_.value(key).toString().replace(regexp,<span class="stringliteral">&quot;&quot;</span>).toDouble(&amp;okConvert);
<a name="l00229"></a>00229 
<a name="l00230"></a>00230         <span class="keywordflow">if</span>(okConvert){
<a name="l00231"></a>00231             <span class="keywordflow">return</span> value;
<a name="l00232"></a>00232         }<span class="keywordflow">else</span>{
<a name="l00233"></a>00233             <span class="keywordflow">throw</span> SERROR_NO_CANNOT_CONVERT_METADATA;
<a name="l00234"></a>00234         }
<a name="l00235"></a>00235     }<span class="keywordflow">else</span>{
<a name="l00236"></a>00236         <span class="keywordflow">throw</span> SERROR_NO_FOUND_METADATA;
<a name="l00237"></a>00237         <span class="keywordflow">return</span> 0;
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239 }
<a name="l00240"></a>00240 
<a name="l00254"></a>00254 
<a name="l00255"></a><a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522">00255</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">SData2D::setMetaData</a>(QString <span class="keyword">const</span> key, QVariant <span class="keyword">const</span> value){
<a name="l00256"></a>00256  MetaData_.insert(key,value);
<a name="l00257"></a>00257 
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 
<a name="l00271"></a>00271 
<a name="l00272"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a4f06e6091291df75bcee12e1ae28aa06">00272</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a4f06e6091291df75bcee12e1ae28aa06" title="add a couple of value at the SData2D.">SData2D::append</a> (<span class="keywordtype">double</span> <span class="keyword">const</span> x, <span class="keywordtype">double</span> <span class="keyword">const</span>  y){
<a name="l00273"></a>00273     this-&gt;x_.append(x);
<a name="l00274"></a>00274     this-&gt;y_.append(y);
<a name="l00275"></a>00275 }
<a name="l00276"></a>00276 
<a name="l00291"></a>00291 
<a name="l00292"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a95283f4f9f922035c40c124da727506a">00292</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a4f06e6091291df75bcee12e1ae28aa06" title="add a couple of value at the SData2D.">SData2D::append</a> (QList&lt;double&gt; <span class="keyword">const</span> xList, QList&lt;double&gt; <span class="keyword">const</span> yList){
<a name="l00293"></a>00293     this-&gt;x_.append(xList);
<a name="l00294"></a>00294     this-&gt;y_.append(yList);
<a name="l00295"></a>00295 }
<a name="l00296"></a>00296 
<a name="l00307"></a>00307 
<a name="l00308"></a><a class="code" href="../../da/d81/class_s_data2_d.html#ac07f6644dcb6a240df2a962a14d5d7ab">00308</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a4f06e6091291df75bcee12e1ae28aa06" title="add a couple of value at the SData2D.">SData2D::append</a> (<a class="code" href="../../d3/d21/struct_s_data2_d_1_1_data_point.html">SData2D::DataPoint</a> <span class="keyword">const</span> point){
<a name="l00309"></a>00309     this-&gt;x_.append(point.x_);
<a name="l00310"></a>00310     this-&gt;y_.append(point.y_);
<a name="l00311"></a>00311 }
<a name="l00312"></a>00312 
<a name="l00313"></a>00313 
<a name="l00331"></a>00331 
<a name="l00332"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a990210e1238c543567233d4502207ecf">00332</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a990210e1238c543567233d4502207ecf" title="Open and read data from a data file.">SData2D::openFile</a>(QFile * file){
<a name="l00333"></a>00333 
<a name="l00334"></a>00334     QStringList SplitList;
<a name="l00335"></a>00335      <span class="keywordtype">int</span> nbHLine=0;
<a name="l00336"></a>00336      QString line;
<a name="l00337"></a>00337      <span class="keywordtype">int</span> i=0;
<a name="l00338"></a>00338 
<a name="l00339"></a>00339     this-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">setMetaData</a>(<span class="stringliteral">&quot;name&quot;</span>,file-&gt;fileName());
<a name="l00340"></a>00340 
<a name="l00341"></a>00341     <span class="keywordflow">if</span> (!file-&gt;open(QIODevice::ReadOnly | QIODevice::Text))
<a name="l00342"></a>00342         <span class="keywordflow">throw</span> SERROR_INACCESSIBLE_FILE;
<a name="l00343"></a>00343 
<a name="l00344"></a>00344 
<a name="l00345"></a>00345      QTextStream streamString (file);
<a name="l00346"></a>00346      QString allfile = streamString.readAll();
<a name="l00347"></a>00347 
<a name="l00348"></a>00348      QTextStream streamH(&amp;allfile);
<a name="l00349"></a>00349      <span class="comment">//in MagToolBox the first line contains the number of line</span>
<a name="l00350"></a>00350      <span class="comment">// so we skip it.</span>
<a name="l00351"></a>00351      <span class="keywordflow">if</span>(MagToolBoxCompatibility_) streamH.readLine();
<a name="l00352"></a>00352      
<a name="l00353"></a>00353      <span class="comment">//we count the number of header lines</span>
<a name="l00354"></a>00354      <span class="keywordflow">while</span>( !streamH.atEnd() ) {
<a name="l00355"></a>00355           line = streamH.readLine();
<a name="l00356"></a>00356           <span class="keywordflow">if</span>(line[0]== <span class="charliteral">&#39;#&#39;</span>)
<a name="l00357"></a>00357                nbHLine++;
<a name="l00358"></a>00358           <span class="keywordflow">else</span>{
<a name="l00359"></a>00359                <span class="keywordflow">break</span>;
<a name="l00360"></a>00360           }
<a name="l00361"></a>00361      }
<a name="l00362"></a>00362      <span class="comment">//rest the stream</span>
<a name="l00363"></a>00363      QTextStream stream (&amp;allfile);
<a name="l00364"></a>00364 
<a name="l00365"></a>00365      <span class="comment">//in MagToolBox the first line contains the number of line</span>
<a name="l00366"></a>00366      <span class="comment">// so we skip it.</span>
<a name="l00367"></a>00367      <span class="keywordflow">if</span>(MagToolBoxCompatibility_) stream.readLine();
<a name="l00368"></a>00368 
<a name="l00369"></a>00369    <span class="comment">//on tourne sur tout les lignes</span>
<a name="l00370"></a>00370    <span class="keywordflow">while</span>( !stream.atEnd() ) {
<a name="l00371"></a>00371         line = stream.readLine();
<a name="l00372"></a>00372           
<a name="l00373"></a>00373         <span class="comment">//traitetement des metadata</span>
<a name="l00374"></a>00374         <span class="keywordflow">if</span>(line[0]== <span class="charliteral">&#39;#&#39;</span>){
<a name="l00375"></a>00375                <span class="keywordflow">if</span>(i&lt;nbHLine-2){
<a name="l00376"></a>00376                      <a class="code" href="../../da/d81/class_s_data2_d.html#aa393d33f3fd0580fac4a0a64171dc157" title="Extract the metadata from a comment line.">treatSharpLine</a>(line);
<a name="l00377"></a>00377                }<span class="keywordflow">else</span>{
<a name="l00378"></a>00378                     colName_ = line.replace(<span class="stringliteral">&quot;#&quot;</span>,<span class="stringliteral">&quot;&quot;</span>).trimmed().split(QRegExp(<span class="stringliteral">&quot;\\s+&quot;</span>));
<a name="l00379"></a>00379                     line = stream.readLine();
<a name="l00380"></a>00380                     i++;
<a name="l00381"></a>00381                     colUnit_ = line.replace(<span class="stringliteral">&quot;#&quot;</span>,<span class="stringliteral">&quot;&quot;</span>).replace(<span class="stringliteral">&quot;(&quot;</span>,<span class="stringliteral">&quot;&quot;</span>).replace(<span class="stringliteral">&quot;)&quot;</span>,<span class="stringliteral">&quot;&quot;</span>).trimmed().split(QRegExp(<span class="stringliteral">&quot;\\s+&quot;</span>));
<a name="l00382"></a>00382                }
<a name="l00383"></a>00383         <span class="comment">// si la ligne n&#39;est pas vierge</span>
<a name="l00384"></a>00384         }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(line[0]!= <span class="charliteral">&#39;\n&#39;</span>){
<a name="l00385"></a>00385 
<a name="l00386"></a>00386             <span class="comment">// on extrait les colonnes de la chaine de caractaires</span>
<a name="l00387"></a>00387             SplitList = line.split(QRegExp(<span class="stringliteral">&quot;\\s+&quot;</span>));
<a name="l00388"></a>00388 
<a name="l00389"></a>00389             <span class="comment">// on rempli la liste</span>
<a name="l00390"></a>00390             this-&gt;x_.append(SplitList[0].toDouble());
<a name="l00391"></a>00391             this-&gt;y_.append(SplitList[1].toDouble());
<a name="l00392"></a>00392 
<a name="l00393"></a>00393         }
<a name="l00394"></a>00394 
<a name="l00395"></a>00395           i++; <span class="comment">// current line (without the MagToolBoxCompatibility_)</span>
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397 
<a name="l00398"></a>00398    file-&gt;close();
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 
<a name="l00401"></a>00401 
<a name="l00402"></a>00402 
<a name="l00403"></a>00403 }
<a name="l00404"></a>00404 
<a name="l00405"></a>00405 
<a name="l00418"></a>00418 
<a name="l00419"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a1b6cc49a63a539237cc6b3e8a4fbf287">00419</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a257edb4aa6ae519ca0f286fbb07ac58f" title="save data to a MagToolBox data file">SData2D::saveFile</a>(QString file){
<a name="l00420"></a>00420 
<a name="l00421"></a>00421       
<a name="l00422"></a>00422 
<a name="l00423"></a>00423      QDir dir(file);
<a name="l00424"></a>00424      QString path = file.left(file.size() - dir.dirName().size()) ;
<a name="l00425"></a>00425      dir.mkpath (path) ;
<a name="l00426"></a>00426 
<a name="l00427"></a>00427      QFile *pfile = <span class="keyword">new</span> QFile(file);
<a name="l00428"></a>00428 
<a name="l00429"></a>00429      <a class="code" href="../../da/d81/class_s_data2_d.html#a257edb4aa6ae519ca0f286fbb07ac58f" title="save data to a MagToolBox data file">saveFile</a>(pfile);
<a name="l00430"></a>00430      <span class="keyword">delete</span>(pfile);
<a name="l00431"></a>00431  }
<a name="l00432"></a>00432 
<a name="l00433"></a>00433 
<a name="l00434"></a>00434 
<a name="l00447"></a>00447 
<a name="l00448"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a257edb4aa6ae519ca0f286fbb07ac58f">00448</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a257edb4aa6ae519ca0f286fbb07ac58f" title="save data to a MagToolBox data file">SData2D::saveFile</a>(QFile * file){
<a name="l00449"></a>00449     <span class="keywordflow">if</span> (!file-&gt;open(QIODevice::WriteOnly | QIODevice::Text))
<a name="l00450"></a>00450         <span class="keywordflow">throw</span> SERROR_INACCESSIBLE_FILE;
<a name="l00451"></a>00451 
<a name="l00452"></a>00452     QTextStream stream (file);
<a name="l00453"></a>00453 
<a name="l00454"></a>00454      <span class="comment">// Compatibility with file magtoolbox</span>
<a name="l00455"></a>00455      <span class="keywordflow">if</span>(MagToolBoxCompatibility_) stream &lt;&lt; 5 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; y_.size();
<a name="l00456"></a>00456      
<a name="l00457"></a>00457 
<a name="l00458"></a>00458    <span class="comment">// for the comments that are not metadata (like a=b)</span>
<a name="l00459"></a>00459    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; comment_.size(); i++ ){
<a name="l00460"></a>00460        stream &lt;&lt; <span class="stringliteral">&quot;\n# &quot;</span> &lt;&lt; comment_.value(i);
<a name="l00461"></a>00461    }
<a name="l00462"></a>00462 
<a name="l00463"></a>00463 
<a name="l00464"></a>00464 
<a name="l00465"></a>00465    <span class="comment">//les autres meta data</span>
<a name="l00466"></a>00466    stream &lt;&lt; <span class="stringliteral">&quot;\n#&quot;</span>;
<a name="l00467"></a>00467     <span class="keywordflow">foreach</span> (QString key, MetaData_.keys()){
<a name="l00468"></a>00468             stream &lt;&lt;<span class="stringliteral">&quot;\n# &quot;</span> &lt;&lt; key &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; MetaData_.value(key).toString() ;
<a name="l00469"></a>00469 
<a name="l00470"></a>00470     }
<a name="l00471"></a>00471 
<a name="l00472"></a>00472     <span class="comment">// les entetes des collones</span>
<a name="l00473"></a>00473      stream &lt;&lt; <span class="stringliteral">&quot;\n#\n#&quot;</span>;
<a name="l00474"></a>00474     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;colName_.size(); i++){
<a name="l00475"></a>00475         stream &lt;&lt; colName_.value(i)&lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> ;
<a name="l00476"></a>00476     }
<a name="l00477"></a>00477      stream &lt;&lt; <span class="stringliteral">&quot;\n#&quot;</span>;
<a name="l00478"></a>00478      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;colUnit_.size(); i++){
<a name="l00479"></a>00479           stream &lt;&lt; <span class="stringliteral">&quot;(&quot;</span> &lt;&lt; colUnit_.value(i) &lt;&lt; <span class="stringliteral">&quot;)\t&quot;</span>;
<a name="l00480"></a>00480      }
<a name="l00481"></a>00481 
<a name="l00482"></a>00482 
<a name="l00483"></a>00483     <span class="comment">// les data</span>
<a name="l00484"></a>00484     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt; y_.size(); i++){
<a name="l00485"></a>00485         stream &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; x_.value(i)&lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; y_.value(i)  ;
<a name="l00486"></a>00486     }
<a name="l00487"></a>00487 
<a name="l00488"></a>00488    file-&gt;close();
<a name="l00489"></a>00489  }
<a name="l00490"></a>00490 
<a name="l00513"></a>00513 
<a name="l00514"></a><a class="code" href="../../da/d81/class_s_data2_d.html#aa393d33f3fd0580fac4a0a64171dc157">00514</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#aa393d33f3fd0580fac4a0a64171dc157" title="Extract the metadata from a comment line.">SData2D::treatSharpLine</a>(QString line){
<a name="l00515"></a>00515     QStringList SplitListEqual;
<a name="l00516"></a>00516     QStringList SplitListSemiColon;
<a name="l00517"></a>00517     <span class="keyword">static</span> <span class="keywordtype">bool</span> FirstComment = <span class="keyword">false</span>;
<a name="l00518"></a>00518 
<a name="l00519"></a>00519     line = line.right(line.length()-1);
<a name="l00520"></a>00520 
<a name="l00521"></a>00521     <span class="comment">// on découpe selon les points-virgules</span>
<a name="l00522"></a>00522     SplitListSemiColon = line.split(<span class="stringliteral">&quot;;&quot;</span>);
<a name="l00523"></a>00523 
<a name="l00524"></a>00524     <span class="comment">//on fait le tour des element séparés par des points-virgules</span>
<a name="l00525"></a>00525     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;SplitListSemiColon.size();k++){
<a name="l00526"></a>00526           <span class="comment">// if is it a couple a=b, but not a escape equal character &#39;\=&#39;</span>
<a name="l00527"></a>00527         <span class="keywordflow">if</span>(line.indexOf(<span class="stringliteral">&quot;=&quot;</span>)!=-1 &amp;&amp; line.indexOf(<span class="stringliteral">&quot;!=&quot;</span>) == -1 ){  <span class="comment">// si c&#39;est un couple a=b</span>
<a name="l00528"></a>00528 
<a name="l00529"></a>00529             SplitListEqual = SplitListSemiColon[k].split(<span class="stringliteral">&quot;=&quot;</span>);
<a name="l00530"></a>00530             this-&gt;NbMetatData_++;
<a name="l00531"></a>00531 
<a name="l00532"></a>00532             <span class="comment">// on découpe pour chaque ligne (il peu y avoir plusieur couple a=b</span>
<a name="l00533"></a>00533             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;SplitListEqual.size();i=i+2){
<a name="l00534"></a>00534                 <span class="keywordflow">if</span> ((i+1)&lt;SplitListEqual.size()){ <span class="comment">// couple entier a=b</span>
<a name="l00535"></a>00535 
<a name="l00536"></a>00536                     this-&gt;MetaData_.insert(SplitListEqual[i].trimmed(),QVariant(SplitListEqual[i+1].trimmed()));
<a name="l00537"></a>00537 
<a name="l00538"></a>00538                 }<span class="keywordflow">else</span>{ <span class="comment">// demi couple a=</span>
<a name="l00539"></a>00539                     MetaData_[SplitListEqual[i].trimmed()]=QVariant(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00540"></a>00540                 }
<a name="l00541"></a>00541             }
<a name="l00542"></a>00542 
<a name="l00543"></a>00543         <span class="comment">// on evite les lignes séparatrices avec que des #</span>
<a name="l00544"></a>00544         }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(line.replace(<span class="stringliteral">&quot;#&quot;</span>,<span class="stringliteral">&quot;&quot;</span>).trimmed() == <span class="stringliteral">&quot;&quot;</span>)){
<a name="l00545"></a>00545                comment_.append(line.replace(<span class="stringliteral">&quot;#&quot;</span>,<span class="stringliteral">&quot;&quot;</span>).trimmed().replace(<span class="stringliteral">&quot;\\=&quot;</span>,<span class="stringliteral">&quot;=&quot;</span>));
<a name="l00546"></a>00546 
<a name="l00547"></a>00547         }
<a name="l00548"></a>00548 
<a name="l00549"></a>00549     }
<a name="l00550"></a>00550 
<a name="l00551"></a>00551 }
<a name="l00552"></a>00552 
<a name="l00553"></a>00553 
<a name="l00586"></a>00586 
<a name="l00587"></a><a class="code" href="../../da/d81/class_s_data2_d.html#ab2ea2386f185bc2e9d60a7fc5a06dea9">00587</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#ab2ea2386f185bc2e9d60a7fc5a06dea9" title="Slide average.">SData2D::slideAverage</a>(<span class="keywordtype">int</span> <span class="keyword">const</span> windows, <span class="keywordtype">double</span> <span class="keyword">const</span> PeackProtectCoeff){
<a name="l00588"></a>00588 
<a name="l00589"></a>00589   <span class="keywordtype">double</span> somme =0;
<a name="l00590"></a>00590   <span class="keywordtype">double</span> prev=0;
<a name="l00591"></a>00591   <span class="keywordtype">double</span> next=0;
<a name="l00592"></a>00592   <span class="keywordtype">double</span> endAverage;
<a name="l00593"></a>00593   <span class="keywordtype">double</span> average=0;
<a name="l00594"></a>00594   <span class="keywordtype">int</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a73f242edb55b8e5e7c1d5b396b19c807" title="Gets the count of element.">size</a> = y_.size();
<a name="l00595"></a>00595 
<a name="l00596"></a>00596   <span class="comment">// fait la somme des windows premiers points</span>
<a name="l00597"></a>00597   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;windows; i++){
<a name="l00598"></a>00598       somme += this-&gt;y_.at(i);
<a name="l00599"></a>00599   }
<a name="l00600"></a>00600 
<a name="l00601"></a>00601   prev = y_.at(0);
<a name="l00602"></a>00602   y_.replace(0,somme/windows);
<a name="l00603"></a>00603 
<a name="l00604"></a>00604   <span class="comment">// pour chaque point on fait glisser la moyenne</span>
<a name="l00605"></a>00605   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt; size- windows; i++){
<a name="l00606"></a>00606     next = y_.at(i+windows-1);
<a name="l00607"></a>00607     somme = (somme +  next - prev);
<a name="l00608"></a>00608     prev = y_.at(i);
<a name="l00609"></a>00609     average = somme/windows;
<a name="l00610"></a>00610 
<a name="l00611"></a>00611     <span class="comment">// le peak protect est actif</span>
<a name="l00612"></a>00612     <span class="keywordflow">if</span>((PeackProtectCoeff !=0)  ){
<a name="l00613"></a>00613         <span class="comment">//A &gt; B et A !=0 pente décendante</span>
<a name="l00614"></a>00614         <span class="keywordflow">if</span>((y_.at(i) &gt; average) &amp;&amp; (y_.at(i)!=0)){
<a name="l00615"></a>00615 
<a name="l00616"></a>00616             <span class="comment">//A/B &lt; peakCoeff =&gt; on a un pics fin</span>
<a name="l00617"></a>00617             <span class="comment">// sinon on remplace</span>
<a name="l00618"></a>00618             <span class="keywordflow">if</span>( !(abs(average/y_.at(i))&lt;PeackProtectCoeff)){
<a name="l00619"></a>00619                 y_.replace(i, average);
<a name="l00620"></a>00620             }
<a name="l00621"></a>00621         <span class="comment">//A &lt; B et B !=0 pente montante</span>
<a name="l00622"></a>00622         }<span class="keywordflow">else</span> <span class="keywordflow">if</span>((y_.at(i) &lt; average) &amp;&amp; (average!=0)){
<a name="l00623"></a>00623 
<a name="l00624"></a>00624             <span class="comment">//A/B &lt; peakCoeff =&gt; on a un pics fin</span>
<a name="l00625"></a>00625             <span class="comment">// sinon on remplace</span>
<a name="l00626"></a>00626             <span class="keywordflow">if</span>( !(abs(y_.at(i)/average) &lt; PeackProtectCoeff)){
<a name="l00627"></a>00627                 y_.replace(i, average);
<a name="l00628"></a>00628             }
<a name="l00629"></a>00629 
<a name="l00630"></a>00630         }
<a name="l00631"></a>00631     }<span class="keywordflow">else</span>{ <span class="comment">// on ne se souci pas des pics</span>
<a name="l00632"></a>00632        y_.replace(i, average);
<a name="l00633"></a>00633    }
<a name="l00634"></a>00634 
<a name="l00635"></a>00635 
<a name="l00636"></a>00636   }
<a name="l00637"></a>00637   endAverage = y_.at(size- windows-1);
<a name="l00638"></a>00638 
<a name="l00639"></a>00639   <span class="comment">// les derneir point sont trétait a part car</span>
<a name="l00640"></a>00640   <span class="comment">// il n&#39;y a plus assez de point pour continuer à</span>
<a name="l00641"></a>00641   <span class="comment">// faire glisser la fenetre</span>
<a name="l00642"></a>00642   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=size-windows-1; i&lt; <a class="code" href="../../da/d81/class_s_data2_d.html#a73f242edb55b8e5e7c1d5b396b19c807" title="Gets the count of element.">size</a>; i++){
<a name="l00643"></a>00643       somme =0;
<a name="l00644"></a>00644       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0; j&lt;windows; j++){
<a name="l00645"></a>00645           <span class="keywordflow">if</span>(i+j&lt;size){
<a name="l00646"></a>00646               somme+=y_.at(i+j);
<a name="l00647"></a>00647           }<span class="keywordflow">else</span>{
<a name="l00648"></a>00648              somme+=endAverage;
<a name="l00649"></a>00649           }
<a name="l00650"></a>00650       }
<a name="l00651"></a>00651       y_.replace(i,somme/windows);
<a name="l00652"></a>00652       endAverage=somme/windows;
<a name="l00653"></a>00653   }
<a name="l00654"></a>00654 
<a name="l00655"></a>00655 }
<a name="l00656"></a>00656 
<a name="l00672"></a>00672 
<a name="l00673"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a425f4ee55d6520beb9adf68f16065211">00673</a> <a class="code" href="../../d3/d21/struct_s_data2_d_1_1_data_point.html">SData2D::DataPoint</a> <a class="code" href="../../da/d81/class_s_data2_d.html#a425f4ee55d6520beb9adf68f16065211" title="return the point of the first max find between &amp;quot;start&amp;quot; en the end of the data...">SData2D::max</a>(<span class="keywordtype">int</span> <span class="keyword">const</span> start <span class="comment">/* =0 */</span>)<span class="keyword"> const</span>{
<a name="l00674"></a>00674 
<a name="l00675"></a>00675     <span class="keywordflow">if</span> (start&gt; y_.size()){
<a name="l00676"></a>00676         <span class="keywordflow">throw</span> SERROR_OUT_OF_BOUNDS;
<a name="l00677"></a>00677     }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(y_.size() ==0 ){
<a name="l00678"></a>00678            <a class="code" href="../../d3/d21/struct_s_data2_d_1_1_data_point.html">SData2D::DataPoint</a> point;
<a name="l00679"></a>00679            point.x_=0;
<a name="l00680"></a>00680            point.y_=0;
<a name="l00681"></a>00681           <span class="keywordflow">return</span> point;
<a name="l00682"></a>00682      }
<a name="l00683"></a>00683 
<a name="l00684"></a>00684 
<a name="l00685"></a>00685     <span class="keywordtype">double</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a425f4ee55d6520beb9adf68f16065211" title="return the point of the first max find between &amp;quot;start&amp;quot; en the end of the data...">max</a>=y_.at(start);
<a name="l00686"></a>00686 
<a name="l00687"></a>00687     <a class="code" href="../../d3/d21/struct_s_data2_d_1_1_data_point.html">SData2D::DataPoint</a> point;
<a name="l00688"></a>00688     <span class="keywordtype">int</span> coordMaxi;
<a name="l00689"></a>00689 
<a name="l00690"></a>00690     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = start; i &lt;y_.size() ; i++ ){
<a name="l00691"></a>00691         <span class="keywordflow">if</span>(y_.at(i)&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a425f4ee55d6520beb9adf68f16065211" title="return the point of the first max find between &amp;quot;start&amp;quot; en the end of the data...">max</a>){
<a name="l00692"></a>00692             max = y_.at(i);
<a name="l00693"></a>00693             coordMaxi = i;
<a name="l00694"></a>00694         }
<a name="l00695"></a>00695     }
<a name="l00696"></a>00696     point.x_ = x_.value(coordMaxi);
<a name="l00697"></a>00697     point.y_ = <a class="code" href="../../da/d81/class_s_data2_d.html#a425f4ee55d6520beb9adf68f16065211" title="return the point of the first max find between &amp;quot;start&amp;quot; en the end of the data...">max</a>;
<a name="l00698"></a>00698 
<a name="l00699"></a>00699     <span class="keywordflow">return</span> point;
<a name="l00700"></a>00700 
<a name="l00701"></a>00701 }
<a name="l00702"></a>00702 
<a name="l00703"></a>00703 
<a name="l00704"></a>00704 
<a name="l00712"></a>00712 
<a name="l00713"></a><a class="code" href="../../da/d81/class_s_data2_d.html#aa0a53180c33b6921635376aa65d920f6">00713</a> <span class="keywordtype">int</span> <a class="code" href="../../da/d81/class_s_data2_d.html#aa0a53180c33b6921635376aa65d920f6" title="Gets the count of element.">SData2D::count</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>{
<a name="l00714"></a>00714           <span class="keywordflow">return</span> x_.count();
<a name="l00715"></a>00715 }
<a name="l00716"></a>00716 
<a name="l00727"></a>00727 
<a name="l00728"></a>00728 <a class="code" href="../../da/d81/class_s_data2_d.html#ae48cf0fb2735a26737a7b67fd34e0d91" title="Default constructor.">SData2D::SData2D</a>(<a class="code" href="../../da/d81/class_s_data2_d.html" title="Class for the manipulation of the data in 2 dimensions (y and y).">SData2D</a> * data){
<a name="l00729"></a>00729      this-&gt;x_ = data-&gt;x_;
<a name="l00730"></a>00730      this-&gt;y_ = data-&gt;y_;
<a name="l00731"></a>00731      this-&gt;MetaData_ = data-&gt;MetaData_;
<a name="l00732"></a>00732      this-&gt;NbMetatData_ = data-&gt;NbMetatData_;
<a name="l00733"></a>00733 }
<a name="l00744"></a>00744 <span class="keywordtype">void</span> SData2D::setData(<a class="code" href="../../da/d81/class_s_data2_d.html" title="Class for the manipulation of the data in 2 dimensions (y and y).">SData2D</a>  data){
<a name="l00745"></a>00745      this-&gt;x_ = data.x_;
<a name="l00746"></a>00746      this-&gt;y_ = data.y_;
<a name="l00747"></a>00747      this-&gt;MetaData_ = data.MetaData_;
<a name="l00748"></a>00748      this-&gt;NbMetatData_ = data.NbMetatData_;
<a name="l00749"></a>00749 
<a name="l00750"></a>00750      this-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a42d483045b81280e070899389b735f47" title="set the name of the X column">setColXName</a>(data.colXName());
<a name="l00751"></a>00751      this-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a17564231f93b0e60fafa0745bc659cd1" title="set the name of the X column">setColYName</a>(data.colYName());
<a name="l00752"></a>00752      this-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a4261dbd531e6dd08692c26c6a6d95dd2" title="set the unit of the X column">setColXUnit</a>(data.colXUnit());
<a name="l00753"></a>00753      this-&gt;setColYUnit(data.colYUnit());
<a name="l00754"></a>00754 }
<a name="l00770"></a>00770 
<a name="l00771"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a8aef386513e4c4a6ca39b6d7fd21518e">00771</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a8aef386513e4c4a6ca39b6d7fd21518e" title="Overwrites all the data an replace by argument data.">SData2D::overwrite</a>(<a class="code" href="../../da/d81/class_s_data2_d.html" title="Class for the manipulation of the data in 2 dimensions (y and y).">SData2D</a> &amp;data){
<a name="l00772"></a>00772 
<a name="l00773"></a>00773      this-&gt;x_ = data.x_;
<a name="l00774"></a>00774      this-&gt;y_ = data.y_;
<a name="l00775"></a>00775      this-&gt;MetaData_ = data.MetaData_;
<a name="l00776"></a>00776      this-&gt;NbMetatData_ = data.NbMetatData_;
<a name="l00777"></a>00777 }
<a name="l00778"></a>00778 
<a name="l00794"></a>00794 
<a name="l00795"></a>00795 <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a8aef386513e4c4a6ca39b6d7fd21518e" title="Overwrites all the data an replace by argument data.">SData2D::overwrite</a>(<a class="code" href="../../da/d81/class_s_data2_d.html" title="Class for the manipulation of the data in 2 dimensions (y and y).">SData2D</a> *data){
<a name="l00796"></a>00796 
<a name="l00797"></a>00797      this-&gt;x_ = data-&gt;x_;
<a name="l00798"></a>00798      this-&gt;y_ = data-&gt;y_;
<a name="l00799"></a>00799      this-&gt;MetaData_ = data-&gt;MetaData_;
<a name="l00800"></a>00800      this-&gt;NbMetatData_ = data-&gt;NbMetatData_;
<a name="l00801"></a>00801 }
<a name="l00809"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a203e75021c3713e65a4a509341ffbd34">00809</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a203e75021c3713e65a4a509341ffbd34" title="add a comment that will be put in the header">SData2D::addComment</a>( QString com ){
<a name="l00810"></a>00810      comment_.append(com);
<a name="l00811"></a>00811 }
<a name="l00812"></a>00812 
<a name="l00820"></a>00820 <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a203e75021c3713e65a4a509341ffbd34" title="add a comment that will be put in the header">SData2D::addComment</a>(QStringList comList ){
<a name="l00821"></a>00821      comment_.append(comList);
<a name="l00822"></a>00822 }
<a name="l00828"></a><a class="code" href="../../da/d81/class_s_data2_d.html#ae14b7d62920cc784bf9301275e032ada">00828</a> QStringList <a class="code" href="../../da/d81/class_s_data2_d.html#ae14b7d62920cc784bf9301275e032ada" title="return the list of comment">SData2D::comment</a>()<span class="keyword"> const</span>
<a name="l00829"></a>00829 <span class="keyword"></span>{
<a name="l00830"></a>00830      <span class="keywordflow">return</span> comment_;
<a name="l00831"></a>00831 }
<a name="l00837"></a>00837 <span class="keywordtype">void</span> SData2D::setComment( QStringList comList )
<a name="l00838"></a>00838 {
<a name="l00839"></a>00839      comment_ = comList;
<a name="l00840"></a>00840 }
<a name="l00846"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a307d183d696eb1fda04d8650c3ccdeb8">00846</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a307d183d696eb1fda04d8650c3ccdeb8" title="clear the all comments">SData2D::clearComment</a>()
<a name="l00847"></a>00847 {
<a name="l00848"></a>00848      comment_.clear();
<a name="l00849"></a>00849 }
<a name="l00855"></a><a class="code" href="../../da/d81/class_s_data2_d.html#ab4b4f53ec850c4a8d568dc934143b13e">00855</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#ab4b4f53ec850c4a8d568dc934143b13e" title="clear the all the metadata">SData2D::clearMetaData</a>()
<a name="l00856"></a>00856 {
<a name="l00857"></a>00857      MetaData_.clear();
<a name="l00858"></a>00858 }
<a name="l00864"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a2d627b5bd4d3f1492ca0366ceead294e">00864</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a2d627b5bd4d3f1492ca0366ceead294e" title="set the name of the columns">SData2D::setColName</a>( QString Xname, QString Yname )
<a name="l00865"></a>00865 {
<a name="l00866"></a>00866      colName_.clear();
<a name="l00867"></a>00867      colName_.append(Xname);
<a name="l00868"></a>00868      colName_.append(Yname);
<a name="l00869"></a>00869 }
<a name="l00875"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a42d483045b81280e070899389b735f47">00875</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a42d483045b81280e070899389b735f47" title="set the name of the X column">SData2D::setColXName</a>( QString Xname )
<a name="l00876"></a>00876 {
<a name="l00877"></a>00877      colName_.replace(0,Xname);
<a name="l00878"></a>00878 }
<a name="l00884"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a17564231f93b0e60fafa0745bc659cd1">00884</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a17564231f93b0e60fafa0745bc659cd1" title="set the name of the X column">SData2D::setColYName</a>( QString Yname )
<a name="l00885"></a>00885 {
<a name="l00886"></a>00886      colName_.replace(1,Yname);
<a name="l00887"></a>00887 }
<a name="l00893"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a9287b893d0955ecb08814ecf1358d356">00893</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a9287b893d0955ecb08814ecf1358d356" title="set the units of the columns">SData2D::setColUnit</a>( QString XUnit, QString YUnit )
<a name="l00894"></a>00894 {
<a name="l00895"></a>00895      colUnit_.clear();
<a name="l00896"></a>00896      colUnit_.append(XUnit);
<a name="l00897"></a>00897      colUnit_.append(YUnit);
<a name="l00898"></a>00898 }
<a name="l00904"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a4261dbd531e6dd08692c26c6a6d95dd2">00904</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a4261dbd531e6dd08692c26c6a6d95dd2" title="set the unit of the X column">SData2D::setColXUnit</a>( QString XUnit )
<a name="l00905"></a>00905 {
<a name="l00906"></a>00906      colUnit_.replace(0,XUnit);
<a name="l00907"></a>00907 }
<a name="l00913"></a>00913 <span class="keywordtype">void</span> SData2D::setColYUnit( QString YUnit )
<a name="l00914"></a>00914 {
<a name="l00915"></a>00915      colUnit_.replace(0,YUnit);
<a name="l00916"></a>00916 }
<a name="l00922"></a>00922 QString SData2D::colXName()
<a name="l00923"></a>00923 {
<a name="l00924"></a>00924      <span class="keywordflow">return</span> colName_.value(0);
<a name="l00925"></a>00925 }
<a name="l00931"></a>00931 QString SData2D::colYName()
<a name="l00932"></a>00932 {
<a name="l00933"></a>00933 
<a name="l00934"></a>00934      
<a name="l00935"></a>00935      <span class="keywordflow">return</span> colName_.value(1);
<a name="l00936"></a>00936 }
<a name="l00942"></a>00942 QString SData2D::colXUnit()
<a name="l00943"></a>00943 {
<a name="l00944"></a>00944      <span class="keywordflow">return</span> colUnit_.value(0);
<a name="l00945"></a>00945 }
<a name="l00951"></a>00951 QString SData2D::colYUnit()
<a name="l00952"></a>00952 {
<a name="l00953"></a>00953      <span class="keywordflow">return</span> colUnit_.value(1);
<a name="l00954"></a>00954 }
<a name="l00960"></a><a class="code" href="../../da/d81/class_s_data2_d.html#aa975caa6d889f43941fb9e20635f94eb">00960</a> <span class="keywordtype">int</span> <a class="code" href="../../da/d81/class_s_data2_d.html#aa975caa6d889f43941fb9e20635f94eb" title="return the number of comments">SData2D::sizeComment</a>()
<a name="l00961"></a>00961 {
<a name="l00962"></a>00962      <span class="keywordflow">return</span> comment_.size();
<a name="l00963"></a>00963 }
<a name="l00971"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a73f242edb55b8e5e7c1d5b396b19c807">00971</a> <span class="keywordtype">int</span> <a class="code" href="../../da/d81/class_s_data2_d.html#a73f242edb55b8e5e7c1d5b396b19c807" title="Gets the count of element.">SData2D::size</a>()<span class="keyword"> const</span>
<a name="l00972"></a>00972 <span class="keyword"></span>{
<a name="l00973"></a>00973      <span class="keywordflow">return</span> <a class="code" href="../../da/d81/class_s_data2_d.html#aa0a53180c33b6921635376aa65d920f6" title="Gets the count of element.">count</a>();
<a name="l00974"></a>00974 }
<a name="l00982"></a><a class="code" href="../../da/d81/class_s_data2_d.html#af9443285d28c66da4cca112b7f95d758">00982</a> QList&lt;double&gt; * <a class="code" href="../../da/d81/class_s_data2_d.html#af9443285d28c66da4cca112b7f95d758" title="Gets a pointer to the x data QList.">SData2D::x</a>() 
<a name="l00983"></a>00983 {
<a name="l00984"></a>00984      <span class="keywordflow">return</span> &amp;x_;
<a name="l00985"></a>00985 }
<a name="l00993"></a><a class="code" href="../../da/d81/class_s_data2_d.html#aeedc3ad1f2b44bf2f76b93fea7500dc1">00993</a> QList&lt;double&gt; * <a class="code" href="../../da/d81/class_s_data2_d.html#aeedc3ad1f2b44bf2f76b93fea7500dc1" title="Gets a pointer to the y data QList.">SData2D::y</a>() 
<a name="l00994"></a>00994 {
<a name="l00995"></a>00995      <span class="keywordflow">return</span> &amp;y_;
<a name="l00996"></a>00996 }
<a name="l01004"></a><a class="code" href="../../da/d81/class_s_data2_d.html#abeab83b5daacfa50ab0b206dadd9a279">01004</a> <span class="keywordtype">double</span> * <a class="code" href="../../da/d81/class_s_data2_d.html#abeab83b5daacfa50ab0b206dadd9a279" title="Gets a pointer to the x data like a plain C++ array.">SData2D::xData</a>() 
<a name="l01005"></a>01005 {
<a name="l01006"></a>01006       vectX = x_.toVector();
<a name="l01007"></a>01007      <span class="keywordflow">return</span> vectX.data();
<a name="l01008"></a>01008 }
<a name="l01009"></a>01009 
<a name="l01017"></a><a class="code" href="../../da/d81/class_s_data2_d.html#a69bade9b66f55015ea72d5b5502a5de0">01017</a> <span class="keywordtype">double</span> * <a class="code" href="../../da/d81/class_s_data2_d.html#a69bade9b66f55015ea72d5b5502a5de0" title="Gets a pointer to the y data like a plain C++ array.">SData2D::yData</a>() 
<a name="l01018"></a>01018 {
<a name="l01019"></a>01019      vectY = y_.toVector();
<a name="l01020"></a>01020      <span class="keywordflow">return</span> vectY.data();
<a name="l01021"></a>01021 
<a name="l01022"></a>01022 }
<a name="l01023"></a>01023 
<a name="l01033"></a><a class="code" href="../../da/d81/class_s_data2_d.html#adb8d8a00ae53b4b46f20eef54a368665">01033</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d81/class_s_data2_d.html#adb8d8a00ae53b4b46f20eef54a368665" title="delete an item of the data">SData2D::delItem</a>( <span class="keywordtype">int</span> i )
<a name="l01034"></a>01034 {
<a name="l01035"></a>01035       <span class="keywordflow">if</span>(i&lt; this-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a73f242edb55b8e5e7c1d5b396b19c807" title="Gets the count of element.">size</a>()){
<a name="l01036"></a>01036            x_.removeAt(i);
<a name="l01037"></a>01037            y_.removeAt(i);
<a name="l01038"></a>01038       }
<a name="l01039"></a>01039 }
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 20:03:28 for SpinToolBox by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
