<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SpinToolBox: D:/Sylvain/Instru/SpinToolBox V2.6/src/plugins/SDevice/SDevicePSAE4440A/SUiCpPSAE4440A.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../compass64.png"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">SpinToolBox&#160;<span id="projectnumber">2.6</span></div>
   <div id="projectbrief">Automatize the measurement process in the characterization of the magnetic tunnel junction</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>D:/Sylvain/Instru/SpinToolBox V2.6/src/plugins/SDevice/SDevicePSAE4440A/SUiCpPSAE4440A.cpp</h1>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &quot;SUiCpPSAE4440A.h&quot;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &lt;time.h&gt;</span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;QtCore&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;QtGui&gt;</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#include &quot;SDK/SData/SData2D.h&quot;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/db2/_s_device_p_s_a_e4440_a_8h.html" title="Declares the SDevicePSAE4440A class.">SDevicePSAE4440A.h</a>&quot;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &quot;SDK/SError.h&quot;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;SDK/SPlot/SPlot2D.h&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;SDK/SUi/QTechSpinBox.h&gt;</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#define GHZ 1000000000</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span>
<a name="l00015"></a>00015 <span class="preprocessor">#define SDEVICEK2400_SHORT_NAME &quot;Keithley2400&quot;</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span><span class="preprocessor">#define SDEVICEDAQFIELDONEAXIS_SHORT_NAME &quot;DaqFieldOneAxis&quot;</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span><span class="preprocessor">#define SDEVICEPSGE8257D_SHORT_NAME &quot;PSGE8257D&quot;</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 SUiCpPSAE4440A::SUiCpPSAE4440A(QWidget * parrent):QWidget(parrent)
<a name="l00021"></a>00021 {
<a name="l00022"></a>00022      setupUi(<span class="keyword">this</span>);
<a name="l00023"></a>00023      PSA = <span class="keyword">new</span> <a class="code" href="../../d7/df9/class_s_device_p_s_a_e4440_a.html" title="Provides control of the E4440A PSA Spectrum Analyzer, 3 Hz - 26.5 GHz, Agilent.">SDevicePSAE4440A</a>(<span class="keyword">this</span>);
<a name="l00024"></a>00024 
<a name="l00025"></a>00025      <span class="comment">// setup ui of the spectrum analyzer tab</span>
<a name="l00026"></a>00026      dsbSaStopFreq-&gt;setBaseUnit(<span class="stringliteral">&quot;Hz&quot;</span>);
<a name="l00027"></a>00027      dsbSaStopFreq-&gt;setPredigits(3);
<a name="l00028"></a>00028      dsbSaStopFreq-&gt;setPostdigits(2);
<a name="l00029"></a>00029      dsbSaStopFreq-&gt;setMinimum(3);
<a name="l00030"></a>00030      dsbSaStopFreq-&gt;setMaximum(26.5*GHZ);
<a name="l00031"></a>00031      dsbSaStopFreq-&gt;setUnitModifiers(<span class="keyword">true</span>);
<a name="l00032"></a>00032      dsbSaStopFreq-&gt;setSingleStep(0.5);
<a name="l00033"></a>00033      dsbSaStopFreq-&gt;setStepInUnit(<span class="keyword">true</span>);
<a name="l00034"></a>00034 
<a name="l00035"></a>00035      dsbSaStartFreq-&gt;setBaseUnit(<span class="stringliteral">&quot;Hz&quot;</span>);
<a name="l00036"></a>00036      dsbSaStartFreq-&gt;setPredigits(3);
<a name="l00037"></a>00037      dsbSaStartFreq-&gt;setPostdigits(2);
<a name="l00038"></a>00038      dsbSaStartFreq-&gt;setMinimum(3);
<a name="l00039"></a>00039      dsbSaStartFreq-&gt;setMaximum(26.5*GHZ);
<a name="l00040"></a>00040      dsbSaStartFreq-&gt;setUnitModifiers(<span class="keyword">true</span>);
<a name="l00041"></a>00041      dsbSaStartFreq-&gt;setStepInUnit(<span class="keyword">true</span>);
<a name="l00042"></a>00042 
<a name="l00043"></a>00043      dsbSaRbw-&gt;setBaseUnit(<span class="stringliteral">&quot;Hz&quot;</span>);
<a name="l00044"></a>00044      dsbSaRbw-&gt;setPredigits(3);
<a name="l00045"></a>00045      dsbSaRbw-&gt;setPostdigits(2);
<a name="l00046"></a>00046      dsbSaRbw-&gt;setMinimum(1);
<a name="l00047"></a>00047      dsbSaRbw-&gt;setMaximum(26.5*GHZ);
<a name="l00048"></a>00048      dsbSaRbw-&gt;setUnitModifiers(<span class="keyword">true</span>);
<a name="l00049"></a>00049      dsbSaRbw-&gt;setStepInUnit(<span class="keyword">true</span>);
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="comment">/*   dsbSaStopFreq-&gt;setDecimals(2);</span>
<a name="l00052"></a>00052 <span class="comment">     dsbSaStopFreq-&gt;setMaximum(26.5*GHZ);</span>
<a name="l00053"></a>00053 <span class="comment">     dsbSaStopFreq-&gt;setMinimum(3);</span>
<a name="l00054"></a>00054 <span class="comment">     dsbSaStopFreq-&gt;setByDecimals(false);</span>
<a name="l00055"></a>00055 <span class="comment">     dsbSaStopFreq-&gt;setStep(0.1);</span>
<a name="l00056"></a>00056 <span class="comment"></span>
<a name="l00057"></a>00057 <span class="comment">     dsbSaStartFreq-&gt;setDecimals(2);</span>
<a name="l00058"></a>00058 <span class="comment">     dsbSaStartFreq-&gt;setMaximum(26.5*GHZ);</span>
<a name="l00059"></a>00059 <span class="comment">     dsbSaStartFreq-&gt;setMinimum(3);</span>
<a name="l00060"></a>00060 <span class="comment">     dsbSaStartFreq-&gt;setByDecimals(false);</span>
<a name="l00061"></a>00061 <span class="comment">     dsbSaStartFreq-&gt;setStep(0.1);</span>
<a name="l00062"></a>00062 <span class="comment"></span>
<a name="l00063"></a>00063 <span class="comment">     dsbSaRbw-&gt;setDecimals(2);</span>
<a name="l00064"></a>00064 <span class="comment">     dsbSaRbw-&gt;setMaximum(26.5*GHZ);</span>
<a name="l00065"></a>00065 <span class="comment">     dsbSaRbw-&gt;setMinimum(1);</span>
<a name="l00066"></a>00066 <span class="comment">     dsbSaRbw-&gt;setByDecimals(false);</span>
<a name="l00067"></a>00067 <span class="comment">     dsbSaRbw-&gt;setStep(0.1);*/</span>
<a name="l00068"></a>00068 
<a name="l00069"></a>00069      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;=70; i+=2){
<a name="l00070"></a>00070           cmbxSaAttenuation-&gt;addItem(QString::number(i) + QString(<span class="stringliteral">&quot; db&quot;</span>));
<a name="l00071"></a>00071      }
<a name="l00072"></a>00072 
<a name="l00073"></a>00073      QString tips = <span class="stringliteral">&quot;Name of the file (without the extension), with the auto tag :\n&quot;</span>;
<a name="l00074"></a>00074      tips += <span class="stringliteral">&quot;    %I the current (en mA)\n&quot;</span>;
<a name="l00075"></a>00075      tips += <span class="stringliteral">&quot;    %H the field (en Vc)\n&quot;</span>;
<a name="l00076"></a>00076      tips += <span class="stringliteral">&quot;    %V the voltage (en V)\n&quot;</span>;
<a name="l00077"></a>00077      tips += <span class="stringliteral">&quot;    %R the resistance (en Ohm)\n&quot;</span>;
<a name="l00078"></a>00078      tips += <span class="stringliteral">&quot;    %F the microwave generator frequency (en GHz)\n&quot;</span>;
<a name="l00079"></a>00079      tips += <span class="stringliteral">&quot;    %P the microwave generator power (en dBm)&quot;</span>;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081      txtSaFileName-&gt;setToolTip(tips);
<a name="l00082"></a>00082 
<a name="l00083"></a>00083      <span class="comment">// Spectrum analyzer PSA E4440A </span>
<a name="l00084"></a>00084      <span class="keywordflow">if</span> (!PSA-&gt;available()){
<a name="l00085"></a>00085           lblSaState-&gt;setText(hearderMsgFormat(<span class="stringliteral">&quot;The spectrum analyzer is unavailable&quot;</span>,Qt::red));
<a name="l00086"></a>00086           ledSa-&gt;setRed();
<a name="l00087"></a>00087      }<span class="keywordflow">else</span>{
<a name="l00088"></a>00088           ledSa-&gt;setYellow();
<a name="l00089"></a>00089 
<a name="l00090"></a>00090           dsbSaStopFreq-&gt;setValue(PSA-&gt;freqStop()*GHZ);
<a name="l00091"></a>00091           dsbSaStartFreq-&gt;setValue(PSA-&gt;freqStart()*GHZ);
<a name="l00092"></a>00092           dsbSaRbw-&gt;setValue(PSA-&gt;rbw()*GHZ);
<a name="l00093"></a>00093           dsbSaNbPoints-&gt;setValue(PSA-&gt;nbPoints());
<a name="l00094"></a>00094 
<a name="l00095"></a>00095           cmbxSaAttenuation-&gt;setCurrentIndex(PSA-&gt;attenuation()/2);
<a name="l00096"></a>00096           dsbSaLevel-&gt;setValue(PSA-&gt;refLevel());
<a name="l00097"></a>00097           dsbSaAverage-&gt;setValue(PSA-&gt;nbAverage());
<a name="l00098"></a>00098 
<a name="l00099"></a>00099           dsbSaMarker-&gt;setMaximum(dsbSaStopFreq-&gt;value());
<a name="l00100"></a>00100           dsbSaMarker-&gt;setMinimum(dsbSaStartFreq-&gt;value());
<a name="l00101"></a>00101 
<a name="l00102"></a>00102           chkbxSaLog-&gt;setChecked(<span class="keyword">false</span>);
<a name="l00103"></a>00103           <span class="comment">//chkbxSaLog</span>
<a name="l00104"></a>00104 
<a name="l00105"></a>00105           ledSa-&gt;setGreen();
<a name="l00106"></a>00106      }         
<a name="l00107"></a>00107 
<a name="l00108"></a>00108      connect(dsbSaStartFreq,SIGNAL(valueChanged(<span class="keywordtype">double</span>)),dsbSaMarker,SLOT(setMinimum(<span class="keywordtype">double</span>)));
<a name="l00109"></a>00109      connect(dsbSaStopFreq,SIGNAL(valueChanged(<span class="keywordtype">double</span>)),dsbSaMarker,SLOT(setMaximum(<span class="keywordtype">double</span>)));
<a name="l00110"></a>00110 }
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 SUiCpPSAE4440A::~SUiCpPSAE4440A(<span class="keywordtype">void</span>)
<a name="l00114"></a>00114 {
<a name="l00115"></a>00115      <span class="keyword">delete</span> PSA;
<a name="l00116"></a>00116 }
<a name="l00117"></a>00117 
<a name="l00125"></a>00125 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_cmdSaMeasure_clicked(){
<a name="l00126"></a>00126 
<a name="l00127"></a>00127      QString I;
<a name="l00128"></a>00128      QString V;
<a name="l00129"></a>00129      QString R;
<a name="l00130"></a>00130      QString H;
<a name="l00131"></a>00131      QString P;
<a name="l00132"></a>00132      QString F;
<a name="l00133"></a>00133      
<a name="l00134"></a>00134      <span class="comment">// if no valid path, goodbye !</span>
<a name="l00135"></a>00135      QFileInfo dir(txtSaTargetFolder-&gt;text());
<a name="l00136"></a>00136      <span class="keywordflow">if</span> (!(dir.isDir())){
<a name="l00137"></a>00137           QMessageBox::warning(<span class="keyword">this</span>, <span class="stringliteral">&quot;SpinTollBox - Error&quot;</span>, <span class="stringliteral">&quot;The directory is not valid.&quot;</span>, QMessageBox::Ok, NULL);
<a name="l00138"></a>00138           <span class="keywordflow">return</span>;
<a name="l00139"></a>00139      }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (!dir.isWritable()){
<a name="l00140"></a>00140           QMessageBox::warning(<span class="keyword">this</span>, <span class="stringliteral">&quot;SpinTollBox - Error&quot;</span>, <span class="stringliteral">&quot;You must have write permission to the output directory.&quot;</span>, QMessageBox::Ok, NULL);
<a name="l00141"></a>00141           <span class="keywordflow">return</span>;   
<a name="l00142"></a>00142      }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144      <span class="keywordflow">if</span> (ledSa-&gt;isGreen()){
<a name="l00145"></a>00145           <span class="comment">//on measure at once !</span>
<a name="l00146"></a>00146           ledSa-&gt;setYellow();
<a name="l00147"></a>00147 
<a name="l00148"></a>00148           <span class="comment">// on force le chargement une fois, et on le block</span>
<a name="l00149"></a>00149           gmdm.MetaDataExist(SDEVICEK2400_SHORT_NAME,<span class="stringliteral">&quot;available&quot;</span>);
<a name="l00150"></a>00150           gmdm.stopReload(<span class="keyword">true</span>);
<a name="l00151"></a>00151 
<a name="l00152"></a>00152           <span class="comment">// Pour le K2400 **********************************************************</span>
<a name="l00153"></a>00153           <span class="keywordflow">if</span> (gmdm.MetaDataExist(SDEVICEK2400_SHORT_NAME,<span class="stringliteral">&quot;available&quot;</span>)
<a name="l00154"></a>00154                &amp;&amp; gmdm.MetaData(SDEVICEK2400_SHORT_NAME,<span class="stringliteral">&quot;available&quot;</span>).value().toBool()
<a name="l00155"></a>00155                &amp;&amp; gmdm.MetaData(SDEVICEK2400_SHORT_NAME,<span class="stringliteral">&quot;activate&quot;</span>).value().toBool()){
<a name="l00156"></a>00156 
<a name="l00157"></a>00157                     <span class="keywordtype">double</span> dI = gmdm.MetaData(SDEVICEK2400_SHORT_NAME,<span class="stringliteral">&quot;I&quot;</span>).value().toDouble();
<a name="l00158"></a>00158                     <span class="keywordtype">double</span> dV = gmdm.MetaData(SDEVICEK2400_SHORT_NAME,<span class="stringliteral">&quot;V&quot;</span>).value().toDouble();
<a name="l00159"></a>00159                     I=QString::number(dI,<span class="charliteral">&#39;f&#39;</span>,4);
<a name="l00160"></a>00160                     V=QString::number(dV,<span class="charliteral">&#39;f&#39;</span>,4);
<a name="l00161"></a>00161 
<a name="l00162"></a>00162                     <span class="keywordflow">if</span>(dI!= 0)
<a name="l00163"></a>00163                          R=QString::number(dV/dI,<span class="charliteral">&#39;f&#39;</span>,2);
<a name="l00164"></a>00164                     <span class="keywordflow">else</span>
<a name="l00165"></a>00165                          R=<span class="stringliteral">&quot;Nan&quot;</span>;  
<a name="l00166"></a>00166           }<span class="keywordflow">else</span>{
<a name="l00167"></a>00167                R=<span class="stringliteral">&quot;Nan&quot;</span>;  
<a name="l00168"></a>00168                V=<span class="stringliteral">&quot;00.00&quot;</span>;     
<a name="l00169"></a>00169                I=<span class="stringliteral">&quot;00.00&quot;</span>;     
<a name="l00170"></a>00170           }
<a name="l00171"></a>00171 
<a name="l00172"></a>00172           <span class="comment">// Pour le champ **********************************************************</span>
<a name="l00173"></a>00173           <span class="keywordflow">if</span> (gmdm.MetaDataExist(SDEVICEDAQFIELDONEAXIS_SHORT_NAME,<span class="stringliteral">&quot;available&quot;</span>)
<a name="l00174"></a>00174                &amp;&amp; gmdm.MetaData(SDEVICEDAQFIELDONEAXIS_SHORT_NAME,<span class="stringliteral">&quot;available&quot;</span>).value().toBool()){
<a name="l00175"></a>00175                     H = QString::number(gmdm.MetaData(SDEVICEDAQFIELDONEAXIS_SHORT_NAME,<span class="stringliteral">&quot;Vfield&quot;</span>).value().toDouble(),<span class="charliteral">&#39;f&#39;</span>,2);
<a name="l00176"></a>00176           }<span class="keywordflow">else</span>{
<a name="l00177"></a>00177                H=<span class="stringliteral">&quot;00.00&quot;</span>;
<a name="l00178"></a>00178           }
<a name="l00179"></a>00179 
<a name="l00180"></a>00180           <span class="comment">// Pour le MW **********************************************************   </span>
<a name="l00181"></a>00181           <span class="keywordflow">if</span> (gmdm.MetaDataExist(SDEVICEPSGE8257D_SHORT_NAME,<span class="stringliteral">&quot;available&quot;</span>)
<a name="l00182"></a>00182                &amp;&amp; gmdm.MetaData(SDEVICEPSGE8257D_SHORT_NAME,<span class="stringliteral">&quot;available&quot;</span>).value().toBool()
<a name="l00183"></a>00183                &amp;&amp; gmdm.MetaData(SDEVICEPSGE8257D_SHORT_NAME,<span class="stringliteral">&quot;activate&quot;</span>).value().toBool()){
<a name="l00184"></a>00184 
<a name="l00185"></a>00185                P = QString::number(gmdm.MetaData(SDEVICEPSGE8257D_SHORT_NAME,<span class="stringliteral">&quot;power&quot;</span>).value().toDouble(),<span class="charliteral">&#39;f&#39;</span>,2);
<a name="l00186"></a>00186                F = QString::number(gmdm.MetaData(SDEVICEPSGE8257D_SHORT_NAME,<span class="stringliteral">&quot;frequency&quot;</span>).value().toDouble(),<span class="charliteral">&#39;f&#39;</span>,6);
<a name="l00187"></a>00187           }<span class="keywordflow">else</span>{
<a name="l00188"></a>00188                P=<span class="stringliteral">&quot;-00.00&quot;</span>;
<a name="l00189"></a>00189                F=<span class="stringliteral">&quot;00.000000&quot;</span>;
<a name="l00190"></a>00190           }
<a name="l00191"></a>00191 
<a name="l00192"></a>00192           <span class="comment">// on redemare le chargement automatique</span>
<a name="l00193"></a>00193           gmdm.stopReload(<span class="keyword">false</span>);
<a name="l00194"></a>00194 
<a name="l00195"></a>00195           <span class="comment">// setup the spectrum analyzer</span>
<a name="l00196"></a>00196           on_cmdSaGo_clicked();
<a name="l00197"></a>00197 
<a name="l00198"></a>00198           <span class="comment">// lets go !</span>
<a name="l00199"></a>00199           <a class="code" href="../../da/d81/class_s_data2_d.html" title="Class for the manipulation of the data in 2 dimensions (y and y).">SData2D</a> * data = PSA-&gt;readSpectrum(); 
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 
<a name="l00202"></a>00202           <span class="comment">// we format the metadata</span>
<a name="l00203"></a>00203           <span class="keywordflow">if</span>(R != <span class="stringliteral">&quot;Nan&quot;</span>) data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">setMetaData</a>(<span class="stringliteral">&quot;R&quot;</span>,R);
<a name="l00204"></a>00204           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">setMetaData</a>(<span class="stringliteral">&quot;I&quot;</span>,I);
<a name="l00205"></a>00205           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">setMetaData</a>(<span class="stringliteral">&quot;V&quot;</span>,V);
<a name="l00206"></a>00206           <span class="keywordflow">if</span>(H != <span class="stringliteral">&quot;Nan&quot;</span>) data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">setMetaData</a>(<span class="stringliteral">&quot;H&quot;</span>,H);
<a name="l00207"></a>00207 
<a name="l00208"></a>00208           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">setMetaData</a>(<span class="stringliteral">&quot;Attenuation&quot;</span>,cmbxSaAttenuation-&gt;currentText());
<a name="l00209"></a>00209           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">setMetaData</a>(<span class="stringliteral">&quot;RBW&quot;</span>,dsbSaRbw-&gt;value());
<a name="l00210"></a>00210           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">setMetaData</a>(<span class="stringliteral">&quot;Attenuation&quot;</span>,cmbxSaAttenuation-&gt;currentText());
<a name="l00211"></a>00211           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">setMetaData</a>(<span class="stringliteral">&quot;NbAverage&quot;</span>,dsbSaAverage-&gt;value());
<a name="l00212"></a>00212           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">setMetaData</a>(<span class="stringliteral">&quot;sweepTime&quot;</span>,PSA-&gt;sweepTime()*1000);
<a name="l00213"></a>00213 
<a name="l00214"></a>00214           <span class="comment">//get current date</span>
<a name="l00215"></a>00215           QDate date = QDate::currentDate();
<a name="l00216"></a>00216           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">setMetaData</a>(<span class="stringliteral">&quot;Date&quot;</span> , date.toString(<span class="stringliteral">&quot;dd MMMM yyyy&quot;</span>));
<a name="l00217"></a>00217 
<a name="l00218"></a>00218           <span class="comment">//get current time</span>
<a name="l00219"></a>00219           QTime time = QTime::currentTime();
<a name="l00220"></a>00220           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#abb7eec2fcce6bba385c8aa5533a23522" title="add or reset a key of the metadata.">setMetaData</a>(<span class="stringliteral">&quot;Time&quot;</span> , time.toString());
<a name="l00221"></a>00221 
<a name="l00222"></a>00222           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a203e75021c3713e65a4a509341ffbd34" title="add a comment that will be put in the header">addComment</a>(<span class="stringliteral">&quot;Measurement done by the control pannel of SpinTollBox&quot;</span>);
<a name="l00223"></a>00223           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a203e75021c3713e65a4a509341ffbd34" title="add a comment that will be put in the header">addComment</a>(txtSaComments-&gt;text());
<a name="l00224"></a>00224           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a2d627b5bd4d3f1492ca0366ceead294e" title="set the name of the columns">setColName</a>(<span class="stringliteral">&quot;Frequency&quot;</span>,<span class="stringliteral">&quot;Voltage&quot;</span>);
<a name="l00225"></a>00225           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a9287b893d0955ecb08814ecf1358d356" title="set the units of the columns">setColUnit</a>(<span class="stringliteral">&quot;GHz&quot;</span>,<span class="stringliteral">&quot;V&quot;</span>);
<a name="l00226"></a>00226 
<a name="l00227"></a>00227           <span class="comment">/*</span>
<a name="l00228"></a>00228 <span class="comment">          we format the name</span>
<a name="l00229"></a>00229 <span class="comment">          Name of the file, with the auto tag :</span>
<a name="l00230"></a>00230 <span class="comment">          %I the current (en mA)</span>
<a name="l00231"></a>00231 <span class="comment">          %H the field (en Vc)</span>
<a name="l00232"></a>00232 <span class="comment">          %V the voltage (en V)</span>
<a name="l00233"></a>00233 <span class="comment">          %R the resistance (en Ohm)</span>
<a name="l00234"></a>00234 <span class="comment">          %F the microwave generator frequency (en GHz)</span>
<a name="l00235"></a>00235 <span class="comment">          %P the microwave generator power (en dBm)</span>
<a name="l00236"></a>00236 <span class="comment">          */</span>
<a name="l00237"></a>00237           
<a name="l00238"></a>00238           QString name = txtSaFileName-&gt;text();
<a name="l00239"></a>00239           name.replace(<span class="stringliteral">&quot;%I&quot;</span>,I,Qt::CaseInsensitive);
<a name="l00240"></a>00240           name.replace(<span class="stringliteral">&quot;%H&quot;</span>,H,Qt::CaseInsensitive);
<a name="l00241"></a>00241           name.replace(<span class="stringliteral">&quot;%V&quot;</span>,V,Qt::CaseInsensitive);
<a name="l00242"></a>00242           name.replace(<span class="stringliteral">&quot;%R&quot;</span>,R,Qt::CaseInsensitive);
<a name="l00243"></a>00243           name.replace(<span class="stringliteral">&quot;%F&quot;</span>,F,Qt::CaseInsensitive);
<a name="l00244"></a>00244           name.replace(<span class="stringliteral">&quot;%P&quot;</span>,P,Qt::CaseInsensitive);
<a name="l00245"></a>00245           name.replace(<span class="stringliteral">&quot;%%&quot;</span>,<span class="stringliteral">&quot;%&quot;</span>,Qt::CaseInsensitive);
<a name="l00246"></a>00246           name.replace(<span class="stringliteral">&quot;%DATE%&quot;</span>,date.toString(<span class="stringliteral">&quot;yyyyMMdd&quot;</span>),Qt::CaseInsensitive);
<a name="l00247"></a>00247           name.replace(<span class="stringliteral">&quot;%TIME%&quot;</span>,time.toString(<span class="stringliteral">&quot;hh-mm-ss&quot;</span>),Qt::CaseInsensitive);
<a name="l00248"></a>00248 
<a name="l00249"></a>00249           QString shortName = name;
<a name="l00250"></a>00250           name = name + <span class="stringliteral">&quot;.spectre.stb&quot;</span>;
<a name="l00251"></a>00251           name = txtSaTargetFolder-&gt;text() + <span class="stringliteral">&quot;\\&quot;</span> + name;
<a name="l00252"></a>00252 
<a name="l00253"></a>00253           <span class="comment">// we write the file</span>
<a name="l00254"></a>00254           QFileInfo file(name);
<a name="l00255"></a>00255 
<a name="l00256"></a>00256           <span class="keywordflow">if</span> (file.exists()){
<a name="l00257"></a>00257                <span class="comment">// the file exist, we ask if we overwrite it</span>
<a name="l00258"></a>00258                <span class="keywordtype">int</span> ret = QMessageBox::question(<span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>,
<a name="l00259"></a>00259                     <span class="stringliteral">&quot;The file already exist, do you want overwrite it?&quot;</span>, 
<a name="l00260"></a>00260                     QMessageBox::Yes,QMessageBox::No);
<a name="l00261"></a>00261 
<a name="l00262"></a>00262                <span class="keywordflow">if</span>(ret == QMessageBox::No){
<a name="l00263"></a>00263                     <span class="comment">//no so goodbye!</span>
<a name="l00264"></a>00264                     ledSa-&gt;setGreen();
<a name="l00265"></a>00265                     <span class="keywordflow">return</span>;
<a name="l00266"></a>00266                }
<a name="l00267"></a>00267           }
<a name="l00268"></a>00268 
<a name="l00269"></a>00269           <span class="comment">//we write the file</span>
<a name="l00270"></a>00270           data-&gt;<a class="code" href="../../da/d81/class_s_data2_d.html#a257edb4aa6ae519ca0f286fbb07ac58f" title="save data to a MagToolBox data file">saveFile</a>(name);
<a name="l00271"></a>00271 
<a name="l00272"></a>00272           <a class="code" href="../../d6/d6c/class_s_plot2_d.html" title="define a Main windows that contained a 2D Plot with all the basic tool (zoom, ...).">SPlot2D</a> * plot = <span class="keyword">new</span> <a class="code" href="../../d6/d6c/class_s_plot2_d.html" title="define a Main windows that contained a 2D Plot with all the basic tool (zoom, ...).">SPlot2D</a>(<span class="keyword">this</span>);
<a name="l00273"></a>00273           plot-&gt;setWindowTitle(shortName + <span class="stringliteral">&quot;- SpinToolBox&quot;</span>);
<a name="l00274"></a>00274           plot-&gt;<a class="code" href="../../d6/d6c/class_s_plot2_d.html#ab8b1160cd57af8d952d376d8d795fb84" title="(SCRIPTABLE)">setData</a>(data);
<a name="l00275"></a>00275           plot-&gt;show();
<a name="l00276"></a>00276           <span class="comment">//it&#39;s finished</span>
<a name="l00277"></a>00277           ledSa-&gt;setGreen();
<a name="l00278"></a>00278 
<a name="l00279"></a>00279 
<a name="l00280"></a>00280      }
<a name="l00281"></a>00281 
<a name="l00282"></a>00282 }
<a name="l00288"></a>00288 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_cmdSaAskRbw_clicked()
<a name="l00289"></a>00289 {
<a name="l00290"></a>00290      <span class="keywordtype">double</span> rbw = (dsbSaStopFreq-&gt;value() - dsbSaStartFreq-&gt;value())/(<span class="keywordtype">double</span>)dsbSaNbPoints-&gt;value();
<a name="l00291"></a>00291      dsbSaRbw-&gt;setValue(rbw);
<a name="l00292"></a>00292      on_cmdSaCheckRbw_clicked();
<a name="l00293"></a>00293 }
<a name="l00294"></a>00294 
<a name="l00299"></a>00299 <span class="comment">//                       (in the Spectrum Analyzer).</span>
<a name="l00302"></a>00302 <span class="comment"></span><span class="keywordtype">void</span> SUiCpPSAE4440A::on_dsbSaStopFreq_valueChanged( <span class="keywordtype">double</span> d ){
<a name="l00303"></a>00303 
<a name="l00304"></a>00304      sldSaMarker-&gt;setMaximum(d/50.0);
<a name="l00305"></a>00305 
<a name="l00306"></a>00306      <span class="keywordflow">if</span> (ledSa-&gt;isGreen() &amp;&amp; chkbxSaRealTime-&gt;isChecked()){
<a name="l00307"></a>00307           PSA-&gt;setFreqStop(dsbSaStopFreq-&gt;value()/GHZ);
<a name="l00308"></a>00308      }
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 }
<a name="l00311"></a>00311 
<a name="l00316"></a>00316 <span class="comment">//                       (in the Spectrum Analyzer).</span>
<a name="l00319"></a>00319 <span class="comment"></span><span class="keywordtype">void</span> SUiCpPSAE4440A::on_dsbSaStartFreq_valueChanged( <span class="keywordtype">double</span> d ){
<a name="l00320"></a>00320      sldSaMarker-&gt;setMinimum(d/50.0);
<a name="l00321"></a>00321 
<a name="l00322"></a>00322      <span class="keywordflow">if</span> (ledSa-&gt;isGreen() &amp;&amp; chkbxSaRealTime-&gt;isChecked()){
<a name="l00323"></a>00323           PSA-&gt;setFreqStop(dsbSaStartFreq-&gt;value()/GHZ);
<a name="l00324"></a>00324      }
<a name="l00325"></a>00325 
<a name="l00326"></a>00326 }
<a name="l00331"></a>00331 <span class="comment">//                       (in the Spectrum Analyzer).</span>
<a name="l00334"></a>00334 <span class="comment"></span><span class="keywordtype">void</span> SUiCpPSAE4440A::on_dsbSaRbw_valueChanged( <span class="keywordtype">double</span> d ){
<a name="l00335"></a>00335 
<a name="l00336"></a>00336      <span class="keywordflow">if</span> (ledSa-&gt;isGreen() &amp;&amp; chkbxSaRealTime-&gt;isChecked()){
<a name="l00337"></a>00337 
<a name="l00338"></a>00338           ledSa-&gt;setYellow();
<a name="l00339"></a>00339           PSA-&gt;setRbw(dsbSaRbw-&gt;value()/GHZ);
<a name="l00340"></a>00340 
<a name="l00341"></a>00341           delay(0.3);
<a name="l00342"></a>00342           <span class="comment">// on met la valeur efective du rbw choisit par l&#39;analyseur car toute les valeur ne sont pas compatible</span>
<a name="l00343"></a>00343           <span class="keywordtype">double</span> rbw1= PSA-&gt;rbw();
<a name="l00344"></a>00344           <span class="keywordtype">double</span> rbw2= dsbSaRbw-&gt;value();
<a name="l00345"></a>00345           <span class="keywordflow">if</span>(fabs(PSA-&gt;rbw() - dsbSaRbw-&gt;value()*GHZ) &gt;0.00000001){
<a name="l00346"></a>00346                cmdSaCheckRbw-&gt;setIcon(QIcon(<span class="stringliteral">&quot;:icon/cross.png&quot;</span>));
<a name="l00347"></a>00347           }<span class="keywordflow">else</span>{
<a name="l00348"></a>00348                cmdSaCheckRbw-&gt;setIcon(QIcon(<span class="stringliteral">&quot;:icon/check.png&quot;</span>));
<a name="l00349"></a>00349           }
<a name="l00350"></a>00350 
<a name="l00351"></a>00351           ledSa-&gt;setGreen();
<a name="l00352"></a>00352      }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 }
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 
<a name="l00363"></a>00363 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_cmdSaCheckRbw_clicked(){
<a name="l00364"></a>00364      <span class="keywordflow">if</span> (ledSa-&gt;isGreen()){
<a name="l00365"></a>00365 
<a name="l00366"></a>00366           ledSa-&gt;setYellow();
<a name="l00367"></a>00367           <span class="keywordtype">double</span> rbw2 =dsbSaRbw-&gt;value()/GHZ;
<a name="l00368"></a>00368           PSA-&gt;setRbw(dsbSaRbw-&gt;value()/GHZ);
<a name="l00369"></a>00369 
<a name="l00370"></a>00370           delay(0.3);
<a name="l00371"></a>00371           <span class="keywordtype">double</span> rbw1    =PSA-&gt;rbw();
<a name="l00372"></a>00372           dsbSaRbw-&gt;setValue(PSA-&gt;rbw()*GHZ);
<a name="l00373"></a>00373           cmdSaCheckRbw-&gt;setIcon(QIcon(<span class="stringliteral">&quot;:icon/check.png&quot;</span>));
<a name="l00374"></a>00374           ledSa-&gt;setGreen();
<a name="l00375"></a>00375      }
<a name="l00376"></a>00376 }
<a name="l00377"></a>00377 
<a name="l00384"></a>00384 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_dsbSaAverage_valueChanged( <span class="keywordtype">int</span> i ){
<a name="l00385"></a>00385      <span class="keywordflow">if</span> (ledSa-&gt;isGreen() &amp;&amp; chkbxSaRealTime-&gt;isChecked()){
<a name="l00386"></a>00386           PSA-&gt;setNbAverage(dsbSaAverage-&gt;value());
<a name="l00387"></a>00387      }
<a name="l00388"></a>00388 
<a name="l00389"></a>00389 }
<a name="l00396"></a>00396 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_dsbSaNbPoints_valueChanged( <span class="keywordtype">int</span> i ){
<a name="l00397"></a>00397      <span class="keywordflow">if</span> (ledSa-&gt;isGreen() &amp;&amp; chkbxSaRealTime-&gt;isChecked()){
<a name="l00398"></a>00398           PSA-&gt;setNbPoints(dsbSaNbPoints-&gt;value());
<a name="l00399"></a>00399      }
<a name="l00400"></a>00400 
<a name="l00401"></a>00401 }
<a name="l00408"></a>00408 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_dsbSaLevel_valueChanged( <span class="keywordtype">double</span> d ){
<a name="l00409"></a>00409      <span class="keywordflow">if</span> (ledSa-&gt;isGreen() &amp;&amp; chkbxSaRealTime-&gt;isChecked()){
<a name="l00410"></a>00410           PSA-&gt;setRefLevel(dsbSaLevel-&gt;value());
<a name="l00411"></a>00411      }
<a name="l00412"></a>00412 
<a name="l00413"></a>00413 }
<a name="l00420"></a>00420 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_cmbxSaAttenuation_currentIndexChanged( <span class="keyword">const</span> QString &amp; text ){
<a name="l00421"></a>00421      <span class="keywordflow">if</span> (ledSa-&gt;isGreen() &amp;&amp; chkbxSaRealTime-&gt;isChecked()){
<a name="l00422"></a>00422           PSA-&gt;setAttenuation(text.left(text.length()-3).toInt());
<a name="l00423"></a>00423      }
<a name="l00424"></a>00424 }
<a name="l00425"></a>00425 
<a name="l00432"></a>00432 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_chkbxSaMarkerOnOff_stateChanged( <span class="keywordtype">int</span> state ){
<a name="l00433"></a>00433 
<a name="l00434"></a>00434      <span class="keywordflow">if</span> (ledSa-&gt;isGreen()){
<a name="l00435"></a>00435 
<a name="l00436"></a>00436           <span class="keywordflow">if</span>(state){
<a name="l00437"></a>00437                PSA-&gt;marker(<span class="keyword">true</span>,1);
<a name="l00438"></a>00438           }<span class="keywordflow">else</span>{
<a name="l00439"></a>00439                PSA-&gt;marker(<span class="keyword">false</span>,1);
<a name="l00440"></a>00440           }
<a name="l00441"></a>00441      }
<a name="l00442"></a>00442 }
<a name="l00449"></a>00449 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_dsbSaMarker_valueChanged( <span class="keywordtype">double</span> d ){
<a name="l00450"></a>00450 
<a name="l00451"></a>00451      sldSaMarker-&gt;setValue(d/50.0); <span class="comment">// le QSlider ne suporte pas les valeurs &lt; 9.0e+9</span>
<a name="l00452"></a>00452      <span class="keywordflow">if</span> (ledSa-&gt;isGreen() &amp;&amp; chkbxSaMarkerOnOff-&gt;isChecked()){
<a name="l00453"></a>00453           PSA-&gt;setMarker(d/GHZ, 1);
<a name="l00454"></a>00454           delay(0.01);
<a name="l00455"></a>00455           lblSaMarker-&gt;setText(<span class="stringliteral">&quot;M = &quot;</span> + QString::number(PSA-&gt;readMarker(1)*1000) + <span class="stringliteral">&quot; mV&quot;</span>);
<a name="l00456"></a>00456      }
<a name="l00457"></a>00457 }
<a name="l00464"></a>00464 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_sldSaMarker_sliderMoved( <span class="keywordtype">int</span> d ){
<a name="l00465"></a>00465      dsbSaMarker-&gt;setValue(d*50.0);
<a name="l00466"></a>00466 
<a name="l00467"></a>00467 }
<a name="l00474"></a>00474 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_cmdSaGo_clicked(){
<a name="l00475"></a>00475 
<a name="l00476"></a>00476      <span class="keywordflow">if</span> (ledSa-&gt;isRed() &amp;&amp; PSA-&gt;available()){
<a name="l00477"></a>00477 
<a name="l00478"></a>00478           ledSa-&gt;setGreen();
<a name="l00479"></a>00479           lblSaState-&gt;setText(hearderMsgFormat(<span class="stringliteral">&quot;The spectrum analyzer ON&quot;</span>,Qt::darkGreen));
<a name="l00480"></a>00480           <span class="keywordflow">return</span>;
<a name="l00481"></a>00481 
<a name="l00482"></a>00482      }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (!PSA-&gt;available()){
<a name="l00483"></a>00483           ledSa-&gt;setRed();
<a name="l00484"></a>00484           lblSaState-&gt;setText(hearderMsgFormat(<span class="stringliteral">&quot;The spectrum analyzer is unavailable&quot;</span>,Qt::red));
<a name="l00485"></a>00485           <span class="keywordflow">return</span>;
<a name="l00486"></a>00486      }
<a name="l00487"></a>00487 
<a name="l00488"></a>00488      <span class="keywordflow">if</span> (ledSa-&gt;isGreen()){
<a name="l00489"></a>00489 
<a name="l00490"></a>00490           ledSa-&gt;setYellow();
<a name="l00491"></a>00491           PSA-&gt;setAttenuation(cmbxSaAttenuation-&gt;currentText().left(cmbxSaAttenuation-&gt;currentText().length()-3).toInt());
<a name="l00492"></a>00492           delay(0.2);
<a name="l00493"></a>00493           PSA-&gt;setRefLevel(dsbSaLevel-&gt;value());
<a name="l00494"></a>00494           delay(0.2);
<a name="l00495"></a>00495           PSA-&gt;setNbPoints(dsbSaNbPoints-&gt;value());
<a name="l00496"></a>00496           delay(0.2);
<a name="l00497"></a>00497           PSA-&gt;setRbw(dsbSaRbw-&gt;value()/GHZ);
<a name="l00498"></a>00498           delay(0.2);
<a name="l00499"></a>00499           PSA-&gt;setFreqStart(dsbSaStartFreq-&gt;value()/GHZ);
<a name="l00500"></a>00500           delay(0.2);
<a name="l00501"></a>00501           PSA-&gt;setFreqStop(dsbSaStopFreq-&gt;value()/GHZ);
<a name="l00502"></a>00502           delay(0.2);
<a name="l00503"></a>00503           PSA-&gt;setNbAverage(dsbSaAverage-&gt;value());
<a name="l00504"></a>00504           delay(0.2);
<a name="l00505"></a>00505           dsbSaRbw-&gt;setValue(PSA-&gt;rbw()*GHZ);
<a name="l00506"></a>00506 
<a name="l00507"></a>00507           ledSa-&gt;setGreen();
<a name="l00508"></a>00508      }
<a name="l00509"></a>00509 
<a name="l00510"></a>00510 }
<a name="l00517"></a>00517 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_chkbxSaLog_stateChanged( <span class="keywordtype">int</span> state )
<a name="l00518"></a>00518 {
<a name="l00519"></a>00519      PSA-&gt;setLogDisplay(state);
<a name="l00520"></a>00520 }
<a name="l00521"></a>00521 
<a name="l00528"></a>00528 <span class="keywordtype">void</span> SUiCpPSAE4440A::on_cmdSaTargetFolder_clicked()
<a name="l00529"></a>00529 {
<a name="l00530"></a>00530      QString   path = QFileDialog::getExistingDirectory ( <span class="keyword">this</span>,<span class="stringliteral">&quot;Choose a script file&quot;</span>, QApplication::applicationDirPath ()); 
<a name="l00531"></a>00531      txtSaTargetFolder-&gt;setText(path);
<a name="l00532"></a>00532 }
<a name="l00533"></a>00533 
<a name="l00540"></a>00540 <span class="keywordtype">void</span> SUiCpPSAE4440A::delay(<span class="keywordtype">double</span> i) 
<a name="l00541"></a>00541 {
<a name="l00542"></a>00542      clock_t start,end;
<a name="l00543"></a>00543      start=clock();
<a name="l00544"></a>00544 
<a name="l00545"></a>00545      <span class="keywordflow">while</span>(((end=clock())-start)&lt;=i*CLOCKS_PER_SEC){
<a name="l00546"></a>00546           QCoreApplication::processEvents ();
<a name="l00547"></a>00547      }
<a name="l00548"></a>00548 
<a name="l00549"></a>00549 }
<a name="l00550"></a>00550 
<a name="l00559"></a>00559 QString SUiCpPSAE4440A::hearderMsgFormat( QString msg, QColor color ){
<a name="l00560"></a>00560 
<a name="l00561"></a>00561      QString res =  QString(<span class="stringliteral">&quot;&lt;p align=\&quot;center\&quot;&gt;&lt;span style=\&quot; font-size:16pt; font-weight:600; color:&quot;</span>)
<a name="l00562"></a>00562           + color.name() + QString(<span class="stringliteral">&quot;\&quot;&gt;&quot;</span>) + msg + QString(<span class="stringliteral">&quot;&lt;/span&gt;&lt;/p&gt;&quot;</span>);
<a name="l00563"></a>00563 
<a name="l00564"></a>00564      <span class="keywordflow">return</span> res;
<a name="l00565"></a>00565 
<a name="l00566"></a>00566 }
<a name="l00567"></a>00567 
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Nov 13 2012 20:03:28 for SpinToolBox by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
